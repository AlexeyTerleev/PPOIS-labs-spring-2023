## RailwayModelSimulation
Лабораторная работа №1 по дисциплине ППОИС. Модель железной дороги. Эта программа Python моделирует модель железной дороги с использованием графического подхода. Он загружает данные из файла JSON, содержащего информацию об узлах и ребрах железной дороги, и моделирует движение поездов по сети.
## Описание проекта
### Graph class
Реализация класса неориентированного графа, который позволяет добавлять и удалять вершины и ребра с соответствующими весами, а также находить все пути между двумя вершинами.
#### Описание методов класса
- ```__init__(self) ```: инициализирует класс Graph с пустым набором вершин, пустым словарем ребер и пустым словарем весов.
- ```add_vertex(self, vertex)```: добавляет вершину в граф.
- ```add_edge(self, vertex1, vertex2, weight=1)```: добавляет ребро между двумя вершинами с дополнительным весом. Если ребро уже существует, метод возвращается без внесения каких-либо изменений.
- ```get_verticies_value(self)```: возвращает количество вершин в графе.
- ```get_vertecies(self)```: возвращает набор всех вершин графа.
- ```remove_edge(self, vertex1, vertex2)```: удаляет ребро между vertex1 и vertex2, а также удаляет его соответствующий вес.
- ```is_edge(self, vertex1, vertex2)```: возвращает логическое значение, указывающее, есть ли ребро между vertex1 и vertex2.
- ```get_weight(self, vertex1, vertex2)```: возвращает вес ребра между вершинами vertex1 и vertex2
- ```set_weight(self, vertex1, vertex2, weight)```: устанавливает вес ребра между vertex1 и vertex2 равным предоставленному весу.
- ```find_all_paths(self, start_vertex, end_vertex, path=[])```: Находит все пути между start_vertex и end_vertex.
- ```build_adjacency_matrix(self)```: строит матрицу смежности графа.
- ```print_adjacency_matrix(self)```: вывод матрицы смежности графа.
- ```__str__(self)```:  возвращает строковое представление объекта графа.
### Locomotive class
Реализация локомотива
#### Описание методов класса
- ```__init__(self,speed)```: конструктор, принимает начальную скорость локомотива speed
- ```set_speed(self,speed)```: устанавливает новую скорость для локомотива
### TrainCar class
Реализация класса вагона поезда
#### Описание методов класса
- ```__init__(self)```: конструктор, устанавливает начальные значения для максимальной вместимости вагона, текущего количества груза и типа груза
- ```get_current_occupancy(self)```: возвращает текущее количество груза в вагоне
- ```load(self,cargo_type,value)```: загружает груз в вагон, принимает тип груза и значение, если значение не превышает максимальной вместимости вагона, иначе выдает исключение
- ```unload(self,type)```: выгружает груз из вагона, принимает тип груза, если тип груза совпадает с типом груза в вагоне, выгружает груз и возвращает количество выгруженного груза, иначе не делает ничего
- ```get_cargo_type(self)```: возвращает тип груза в вагоне
- ```set_cargo_type(self,type)```: устанавливает новый тип груза в вагоне
- ```__str__(self)```: строковое представление объекта, возвращает текущее количество груза, максимальную вместимость и тип груза в формате " Current_occupancy: Max_occupancy: Cargo_type:"
### Train class
Реализация класса поезда
#### Описание методов класса
- ```__init__(self,train_number,locomotive_speed,traincar_value)```: инициализирует класс Train с пустым набором вагонов, указанной скоростью локомотива и номером поезда.
- ```calculate_current_speed(self)```: вычисляет текущую скорость поезда на основе количества вагонов.
- ```trainCar_value(self)```: возвращает количество вагонов поезда.
- ```load_train(self,load_value)```: загружает поезд указанным значением груза.
- ```unload_train(self)```: выгружает груз из поезда.
- ```set_current_task(self,task)```: задает текущую задачу для поезда.
- ```get_current_task(self)```: возвращает текущую задачу для поезда.
- ```set_current_task_type(self,task_type)```: задает тип текущей задачи для поезда.
- ```get_current_task_type(self)```: возвращает тип текущей задачи для поезда.
- ```get_current_load_status(self)```: возвращает булево значение, указывающее наличие груза в первом вагоне поезда.
- ```get_trainCars(self)```: возвращает список вагонов поезда.
- ```get_train_number(self)```: возвращает номер поезда.
- ```get_train_speed(self)```: возвращает скорость поезда.
- ```get_current_position(self)```: возвращает текущую позицию поезда.
- ```set_current_position(self,position)```: устанавливает текущую позицию поезда.
- ```__str__(self)```: возвращает строковое представление объекта поезда, включая номер поезда, количество вагонов, текущую загрузку вагонов и скорость поезда.
### Railway_station class
Реализация класса железнодорожной станции. Железнодорожная станция имеет номер и хранит грузы на складе. Она также может загружать и выгружать грузы с поездов.
#### Зависимости
-```Train```
#### Описание методов класса
- ```__init__```(self, rs_number): Конструктор класса, принимающий номер железнодорожной станции.
- ```set_rs_number(self, number)```: Метод для задания номера железнодорожной станции.
- ```get_rs_number(self)```: Метод для получения номера железнодорожной станции.
- ```load_to_stock(self, cargo_type, cargo_quantity)```: Метод для загрузки груза на склад железнодорожной станции. Принимает тип груза и его количество.
- ```get_stock_info(self, cargo_type)```: Метод для получения информации о наличии определенного груза на складе железнодорожной станции.
- ```get_all_stock_cargo(self)```: Метод для получения списка всех типов грузов на складе железнодорожной станции.
- ```unload_from_stock(self, cargo_type, cargo_quantity)```: Метод для выгрузки груза со склада железнодорожной станции. Принимает тип груза и его количество.
- ```load_train(self, train, cargo_type, cargo_quantity)```: Метод для загрузки груза на поезд. Принимает экземпляр класса Train, тип груза и его количество.
- ```unload_train(self, train)```: Метод для выгрузки груза с поезда. Принимает экземпляр класса Train.
- ```__str__(self)```: возвращает строковое представление объекта железнодорожной станции, включая номер станции и объекты склада.
### Db_Utility module
Реализация модуля для копирования и редактирования информации из файла Railway_Db.json
#### Зависимости
- ```json```
- ```Graph```
- ```Train```
#### Описание методов модуля
- ```load_graph_data()```: Эта функция загружает данные графа из файла JSON Railway_db.json и создает из него объект Graph. Она возвращает объект Graph.

- ```add_to_graph(graphElm:list)```: Эта функция принимает список элементов графа (graphElm) в качестве входных данных и добавляет их в граф в файле Railway_db.json. Если список содержит только один элемент, он добавляет новый узел в граф. Если список содержит три элемента, он добавляет новое ребро между двумя узлами с указанными весами.

- ```del_from_graph(graphElm:list)```: Эта функция принимает список элементов графа (graphElm) в качестве входных данных и удаляет их из графа в файле Railway_db.json. Если список содержит только один элемент, он удаляет узел с указанным ID и все его инцидентные ребра. Если список содержит два элемента, он удаляет ребро между двумя узлами.

- ```load_train_data()```: Эта функция загружает данные поезда из файла Railway_db.json и создает из него список объектов Train. Она возвращает список объектов Train.

- ```add_to_trains(trainElm:list)```: Эта функция принимает список элементов поезда (trainElm) в качестве входных данных и добавляет новый поезд с указанными атрибутами в файл Railway_db.json.
- ```del_from_trains(trainElm:list)```: Эта функция принимает список элементов поезда (trainElm) в качестве входных данных и удаляет поезд с указанным номером из файла Railway_db.json.
### Simulation class
Реализация основного класса отвечающего за симуляцию
#### Зависимости
- ```Db_Utility```
- ```Railway_station```
- ```random```
- ```os```
#### Описание методов класса
- ```__init__(self, movement_cycles_value=None)```: Конструктор класса Simulation. Он загружает данные графа с помощью метода ```load_graph_data``` модуля ```Db_Utility```. Он также создает железнодорожные станции с помощью метода ```create_railway_stations``` и создает поезда с помощью метода ```create_trains```. Затем он создает задачи для поездов с помощью метода ```create_tasks``` и печатает задачи. Наконец, он запускает симуляцию движения с помощью метода ```movement_simulation```.
- ```create_railway_stations(self)```: Этот метод создает железнодорожные станции для симуляции. Он использует модуль ```Railway_station``` для создания станций для каждой вершины в графе. Затем он загружает типы грузов на станции в соответствии с размером и остатком.
- ```create_trains(self)```: Этот метод загружает данные о поездах с помощью метода ```load_train_data``` модуля ```Db_Utility```.
- ```create_tasks(self)```: Этот метод создает задачи для каждого поезда. Он случайным образом выбирает задачу для каждого поезда, либо загрузить, либо разгрузить груз, и устанавливает задачу в объект поезда. Он также удаляет выбранный тип груза из списка доступных типов груза.
- ```create_paths(self)```: Этот метод создает пути для поездов. Он использует метод ```find_all_paths``` графа для поиска кратчайшего пути между текущей позицией поезда и станцией, куда он должен ехать. Он также рассчитывает расстояние каждого пути.
- ```movement_simulation(self, movement_cycles_value=None, auto_mode=True)```: Этот метод симулирует движение поездов. Он работает в цикле до тех пор, пока все задачи не будут выполнены. Он проверяет, прибыл ли поезд в пункт назначения, и разгружает или загружает груз соответственно. Он также обновляет текущую позицию и задачу поезда.
### Main module
Реализация интерфейса командной строки и запуск программы
#### Аргументы командной строки
- ```--auto```: включить автоматический режим
- ```-iterations```: количество итераций (по умолчанию: 1)
- ```--graphdb```: Показать график
- ```--traindb```: Показать базу данных поездов
- ```-add [elm]```: добавить элемент (1 значение для узла, 3 значения для ребра) на график или данные в базу данных поезда (3 значения: train_number, locomotive_speed, trainCar_value)
- ```-rm [elm]```: удалить элемент (1 значение для узла, 3 значения для ребра) из графа или данных из базы данных поезда (1 значение: train_number)
#### Использование
Запуск программы:
```
python main.py --auto -iterations your_value
```
Вывод текущего графа в виде списка ребер:
```
python main.py --graphdb
```
![Image alt](https://github.com/Luci-qq/PPOIS-labs-spring-2023/blob/%D0%93%D0%B0%D0%BD%D1%87%D0%B0%D1%80_%D0%92_%D0%98/LR1/readmeFiles/graphdbExample.png)

Вывод текущих поездов:
```
python main.py --traindb
```
![Image alt](https://github.com/Luci-qq/PPOIS-labs-spring-2023/blob/%D0%93%D0%B0%D0%BD%D1%87%D0%B0%D1%80_%D0%92_%D0%98/LR1/readmeFiles/traindb_Example.png)

Добавление узла в граф:
```
python main.py --graphdb -add your_node
```

Добавление ребра в граф:
```
python main.py --graphdb -add your_node_1 your_node_2 your_edge_weight
```
![Image alt](https://github.com/Luci-qq/PPOIS-labs-spring-2023/blob/%D0%93%D0%B0%D0%BD%D1%87%D0%B0%D1%80_%D0%92_%D0%98/LR1/readmeFiles/graphdb_addExample.png)

Добавление поезда в бд:
```
python main.py --traindb -add your_train_number your_locomotive_speed your_trainCar_value
```
![Image alt](https://github.com/Luci-qq/PPOIS-labs-spring-2023/blob/%D0%93%D0%B0%D0%BD%D1%87%D0%B0%D1%80_%D0%92_%D0%98/LR1/readmeFiles/traindb_addExample.png)

